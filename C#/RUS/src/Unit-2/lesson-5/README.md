# Урок 5: Создание экземпляра актора.

После того как мы изучили основные концепции, давайте перейдём к рассмотрению того, как мы можем создать наш первый актор, а потом создать его экземпляр в нашей системе акторов.

Итак, в этом уроке мы начнём с создания актора. Мы унаследуем его от интерфейса IActor. После того, как мы определим наш актор, мы создадим класс Props для его конфигурирования. А затем, используя Props, мы создадим экземпляр нашего актора в системе акторов. После этого, мы посмотрим, как получить ссылку на наш только что созданный актор.

И так первое что нам нужно сделать это создать новый класс, назовём его PlaybackActor. Далее добавить ссылку на пространство имён Proto, и затем унаследовать наш класс от интерфейса IActor. После этого нам необходимо реализовать метод ReceiveAsync из интерфейса IActor. В итоге наш класс должен выглядеть следующим образом.

```c#
using System;
using System.Threading.Tasks;
using Proto;

public class PlaybackActor : IActor
{
    public PlaybackActor() => Console.WriteLine("Creating a PlaybackActor");
  
    public Task ReceiveAsync(IContext context)
    {
        return Actor.Done;
    }
}
```

Обратите внимание, что вся бизнес логика нашего актора будет располагаться в методе ReceiveAsync.

Для того, что бы система акторов знала, что актор отработал без каких-либо ошибок следует возвращать `Actor.Done`;. В конце работы нашего актора.

После того как мы реализовали основу нашего будущего актора, нам потребуется, создать систему акторов в которой и будет работать экземпляр нашего актора. Это делается с помощью создания экземпляра класса `ActorSystem()`. 

```c#
var system = new ActorSystem();
```

Обратите внимание, что в большинстве случаев следует создавать один экземпляр класса `ActorSystem()` на все приложение. 

Далее нам потребуется создать класс Props, чтобы задать параметры для создания экземпляра нашего актора.

Так как в данном примере, нам не требуется делать каких-либо особых настроек. Процесс создания класса Props будет очень простым. Мы просто вызовем фабричный метод `Props.FromProducer`. И передадим ему наш актор.

```c#
var props = Props.FromProducer(() => new PlaybackActor());
```

После того как, мы создали класс props, в котором содержится описание процесса создания актора. Мы можем приступить непосредственно к созданию экземпляра нашего актора и получения ссылки на него.

Для этого воспользуемся фабричным методом Spawn.

```c#
var pid = system.Root.Spawn(props);
```

Как мы здесь видим, все, что нам нужно для создания экземпляра нашего актора и получения ссылки на него, это передать класс props в фабричный метод Spawn.

По завершении урока, наш код должен выглядеть следующим образом. 

```c#
using System;
using System.Threading.Tasks;
using Proto;

namespace MovieStreaming
{
    public class PlaybackActor : IActor
    {
        public PlaybackActor() => Console.WriteLine("Creating a PlaybackActor");
        public Task ReceiveAsync(IContext context)
        {
            return Actor.Done;
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            var system = new ActorSystem();

            Console.WriteLine("Actor system created");

            var props = Props.FromProducer(() => new PlaybackActor());
            var pid = system.Root.Spawn(props);
            Console.ReadLine();
        }
    }
}
```

Если у вас что-либо не получилось, в папке с уроком лежит готовое решение. Вы всегда можете его запустить и сравнить со своим.

В следующем уроке мы добавим бизнес логику в код нашего актор.