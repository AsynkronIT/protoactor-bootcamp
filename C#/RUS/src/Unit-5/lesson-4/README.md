# Урок 4: Маршрутиэатор с группой.

В предыдущем уроке мы с вами рассматривали пулы, отличительной особенностью пулов, является то, что они, сами осуществляют управление маршрутами. При использовании маршрутизаторов с группами вы должны будете самостоятельно создавать маршруты. Это может пригодиться, когда требуется иметь более полный контроль над тем, когда и как создаются маршруты. В этом уроке мы с вами сначала создадим простой маршрутизатор для группы. Затем рассмотрим, как можно динамически изменять маршруты, используя ещё один набор сообщений маршрутизатора.

#### Создание групп.

Группы создаются почти так же, как пулы. Единственное отличие - при создании пула нужно указать количество экземпляров маршрутов, а при создании группы - список путей к маршрутам.

```c#
var system = new ActorSystem();
var context = new RootContext(system);
var props = context.NewBroadcastGroup(
    context.Spawn(MyActorProps),
    context.Spawn(MyActorProps),
    context.Spawn(MyActorProps),
    context.Spawn(MyActorProps)
);
for (var i = 0; i < 10; i++)
{
    var pid = context.Spawn(props);
    context.Send(pid, new Message { Text = $"{i % 4}" });
}
```

Как вы видите, настройка группы почти не отличается от настройки пула. Создание группы выглядит ещё проще, чем пула, потому что нет нужды определять, как должны создаваться маршруты. А так как в определении группы используются пути к акторам, для добавления удалённых акторов не требуется ничего менять, достаточно добавить полный путь к удалённому актору:

Маршрутизатор с группой используется почти так же, как пул. Единственное отличие: завершение маршрута. Когда завершается маршрут, входящий в пул, маршрутизатор обнаруживает это и удаляет его из пула. Маршрутизатор для группы не поддерживает такой возможности. После завершения маршрута маршрутизатор продолжит посылать ему сообщения, потому что маршрутизатор не управляет маршрутами, и, возможно, в какой-то момент в будущем актор станет доступен.